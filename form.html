<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
</head>

<body>
    <div class="container">
        <div class="row d-flex justify-content-center p-3">
            <div class="col-md-6 border p-3">
                <form onsubmit="return validate()">
                    <h1 class="text-center">Contact Form</h1>

                    <label for="name" class="form-label">Name :</label>
                    <input type="text" class="form-control mb-3" placeholder="Enter Name" id="name" name="name">
                    <span class="text-danger" id="name-error"></span>
                    <br>

                    <label for="pass" class="form-label">Password :</label>
                    <input type="password" class="form-control" placeholder="Enter Password" id="pass" name="pass">
                    <span class="text-danger" id="pass-error"></span>
                    <br>
                    <label for="confirm-pass" class="form-label">Confirm Password :</label>
                    <input type="password" class="form-control" placeholder="Enter confirm Password" id="confirm-pass"
                        name="confirm-pass">
                    <span class="text-danger" id="confirm-pass-error"></span>
                    <br>
                    <label for="email" class="form-label">Email :</label>
                    <input type="text" class="form-control mb-3" placeholder="Enter Email" id="email" name="email">
                    <span class="text-danger" id="email-error"></span>
                    <br>
                    <label for="mobile" class="form-label">Mobile Number :</label>
                    <input type="number" class="form-control mb-3" placeholder="Enter Mobile Number" id="mobile"
                        name="mobile">
                    <span class="text-danger" id="mobile-error"></span>
                    <br>
                    <label for="msg" class="form-label">Message :</label>
                    <textarea id="msg" name="msg" class="form-control mb-3" placeholder="Enter Message"
                        rows="3"></textarea>
                    <span class="text-danger" id="msg-error"></span>
                    <br>
                    <div class="d-flex mb-2 gap-5">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="gender" id="male" value="male">
                            <label class="form-check-label" for="male">
                                Male
                            </label>
                        </div>

                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="gender" id="female" value="female">
                            <label class="form-check-label" for="female">
                                Female
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="gender" id="other" value="other">
                            <label class="form-check-label" for="other">
                                Other
                            </label>
                        </div>
                    </div>

                    <span class="text-danger" id="gender-error"></span>
                    <br>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" value="" id="agree" name="agree">
                        <label class="form-check-label" for="agree">
                            I agree to the terms & conditions
                        </label>
                    </div>
                    <span class="text-danger" id="agree-error"></span>
                    <br>
                    <div class="d-grid">
                        <button class="btn btn-primary" type="submit">Submit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        function validate() {
            const name = document.getElementById("name").value.trim();
            const pass = document.getElementById("pass").value.trim();
            const confirmPass = document.getElementById("confirm-pass").value.trim();
            const email = document.getElementById("email").value.trim();
            const mobile = document.getElementById("mobile").value.trim();
            const message = document.getElementById("msg").value.trim();
            const gender = document.querySelector("input[name = 'gender']:checked");
            const agree = document.getElementById("agree").checked;

            //Error Spans
            const nameError = document.getElementById("name-error");
            const passError = document.getElementById("pass-error");
            const confirmPassError = document.getElementById("confirm-pass-error");
            const emailError = document.getElementById("email-error");
            const mobileError = document.getElementById("mobile-error");
            const msgError = document.getElementById("msg-error");
            const genderError = document.getElementById("gender-error");
            const agreeError = document.getElementById("agree-error");

            //clear previous error messages

            nameError.textContent = "";
            passError.textContent = "";
            confirmPassError.textContent = "";
            emailError.textContent = "";
            mobileError.textContent = "";
            msgError.textContent = "";
            genderError.textContent = "";
            agreeError.textContent = "";

            let isValid = true;

            //validate fields

            if (name === "") {
                nameError.textContent = "please enter your name";
                isValid = false;
            } else if (name.length < 3) {
                nameError.textContent = "please enter atleast 3 characters";
                isValid = false;
            }
            //email

            if(email === "") {
                emailError.textContent = "please enter your email";
                isValid = false;
            } else if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(email)) {
                emailError.textContent = "please enter a valid email address";
                isValid = false;
            }
            //mobile
            if(mobile === "") {
                mobileError.textContent = "please enter your mobile number";
                isValid = false;
            } else if(/^[+]{1}(?:[0-9\-\\(\\)\\/.]\s?){6,15}[0-9]{1}$/.test(mobile)) {
                mobileError.textContent = "please enter a valid 10-digit mobile number";
                isValid = false;
            }

            //password validation (at least 6 chars ,1 number,1 special char)
            const passPattern =  /^(?=.*\d)(?=.*[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?`~]).{6,}$/
            if(pass === "") {
                passError.textContent = "please enter a password";
                isValid = false;
            } else if(!passPattern.test(pass)) {
                passError.textContent = "password must be at least 6 characters,include a number & a special character";
                isValid = false;
            }

            //confirm password
            if(confirmPass === "") {
                confirmPassError.textContent = "please confirm your password";
                isValid = false;
            } else if(confirmPass !== pass) {
                confirmPassError.textContent = "password does not match";
                isValid = false;
            }

            if(message === "") {
                msgError.textContent = "please enter your message";
                isValid = false;
            } else if(message.length < 20) {
                msgError.textContent = "Enter atleast 20 characters";
                isValid = false;
            }
            if(!gender) {
                genderError.textContent = "please select your gender";
                isValid = false;
            } 
            if(!agree) {
                agreeError.textContent = "You must agree to the terms & conditions";
                isValid = false;
            }

            //show bootstrap success alert if valid
            if(isValid) {
                alert("Form Submitted Successfully");
            }
            return isValid; //prevent form submission if valid
        }

    </script>
</body>

</html>